<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="assets/css/menu.css" />
    <link rel="stylesheet" href="assets/css/variables.css" />
    <link rel="stylesheet" href="assets/css/elements.css" />
    <link rel="stylesheet" href="assets/css/styles.css" />
    <title>API REST</title>
  </head>
  <body>
    <aside class="menu white-bg">
      <div class="main-content menu-content">
        <nav>
          <a href="/">Home</a>
        </nav>
      </div>
    </aside>

    <section class="documentation">
      <h1>Documentação Api Rest</h1>

      <div class="data">
        <p>Link para acessar no Insomnia -> http://35.247.229.37/api_rest</p>

        <ul class="info-route">
          <li class="toggle-info">Index</li>
          <ul class="info-data">
            <li>Rota: <code>/home</code></li>
            <li>Tipo: <code>GET</code></li>
            <li>
              Dados para enviar: <code>Não é necessário enviar dados</code>
            </li>
            <li>Exemplo retorno: <code>Status 200 - OK</code></li>
          </ul>

          <li class="toggle-info">Usuário</li>
          <ul class="info-data">
            <li class="toggle-info">Listar Usuários</li>
            <ul class="info-data">
              <li>O que faz: Lista todos os usuarios</li>
              <li>Rota: <code>/users/</code></li>
              <li>Tipo: <code>GET</code></li>
              <li>
                Dados para enviar: <code>Não é necessário enviar dados</code>
              </li>
              <li>
                Exemplo retorno:
                <pre>
[
  {
    "id": 1,
    "nome": "Teste 1",
    "email": "teste@mail.com",
  },
  {
    "id": 6,
    "nome": "Teste 2",
    "email": "teste@mail.com",
  }
]
</pre
                >
              </li>
            </ul>

            <li class="toggle-info">Listar Usuário por Id</li>
            <ul class="info-data">
              <li>O que faz: Lista um usuario especifico</li>
              <li>Rota: <code>/users/:id</code></li>
              <li>Tipo: <code>GET</code></li>

              <li>
                Dados para enviar: É necessário incluir o ID do usuário na URL.
                <br />
                Exemplo:
                <code>/users/6</code>
              </li>
              <li>
                Exemplo retorno:
                <pre>
{
  "id": 6,
  "nome": "Teste 2",
  "email": "teste@mail.com"
}</pre
                >
              </li>
            </ul>
            <li class="toggle-info">Cadastrar Usuário</li>
            <ul class="info-data">
              <li>O que faz: Cadastra um novo usuário</li>
              <li>Rota: <code>/users/</code></li>
              <li>Tipo: <code>POST</code></li>

              <li>
                Dados para enviar:
                <pre>
{ 
  "nome": "Teste", 
  "email": "teste@mail.com", 
  "password": "senhaTeste" 
}</pre
                >
              </li>
              <li>Validações:</li>
              <ul>
                Nome: Campo deve ter entre 3 e 255 caracteres
              </ul>
              <ul>
                Senha: Campo deve ter entre 6 e 50 caracteres
              </ul>
              <ul>
                Email: Deve ser do tipo email (Ex: @mail.com)
              </ul>
              <li>
                Exemplo retorno:
                <pre>
{ 
  "password_hash":"$2a$08$YFK/.wEEqLACCkSN2OjmW.rh/LpewuXcKFefGE05ii.kRHXnwo3Tq",
  "id": 6, 
  "nome": "Teste", 
  "email": "teste@mail.com", 
  "password": "senhaTeste", 
  "updated_at": "2025-02-13T23:00:44.466Z",
  "created_at": "2025-02-13T23:00:44.466Z" 
}
</pre
                >
              </li>
            </ul>

            <li class="toggle-info">Editar Usuário</li>
            <ul class="info-data">
              <li>O que faz: Edita o usuário logado</li>
              <li>Rota: <code>/users/</code></li>
              <li>Tipo: <code>PUT</code></li>
              <li>Necesário token obtido no <code>/tokens/</code></li>

              <li>
                Dados para enviar:
                <code>
                  O usuario só consegue editar a si mesmo, não é necessário
                  enviar o id
                </code>
                <br />
                Exemplo de dados a serem enviados:

                <pre>
{ 
  "nome": "Teste Editado", 
  "email": "teste_editado@mail.com", 
  "password": "senhaTesteEditado" 
}</pre
                >
              </li>
              <li>Validações:</li>
              <ul>
                Nome: Campo deve ter entre 3 e 255 caracteres
              </ul>
              <ul>
                Senha: Campo deve ter entre 6 e 50 caracteres
              </ul>
              <ul>
                Email: Deve ser do tipo email (Ex: @mail.com)
              </ul>
              <li>
                Exemplo retorno:
                <pre>
{
  "id": 6,
  "nome": "Teste Editado",
  "email": "teste_editado@mail.com",
  "password_hash": "$2a$08$30En6uemb1VA0UyZYHHGJONbz70LLKc1sRz6iocafQu2T4B9UBySK",
  "created_at": "2025-02-13T23:00:44.000Z",
  "updated_at": "2025-02-14T16:27:05.063Z",
  "password": "senhaTesteEditado"
}
</pre
                >
              </li>
            </ul>

            <li class="toggle-info">Excluir Usuário</li>
            <ul class="info-data">
              <li>O que faz: Excluir o usuario logado</li>
              <li>Rota: <code>/users/</code></li>
              <li>Tipo: <code>DELETE</code></li>
              <li>Necesário token obtido no <code>/tokens/</code></li>

              <li>
                Dados para enviar:
                <code>
                  Não é necessário enviar dados, dado que o usuário só terá
                  permissão para excluir a si mesmo
                </code>
              </li>
              <li>
                Exemplo retorno:
                <pre>"Usuário excluido!"</pre>
              </li>
            </ul>
          </ul>

          <li class="toggle-info">Tokens</li>
          <ul class="info-data">
            <li>O que faz: Gera o token de autenticação com prazo de 7 dias</li>
            <li>Rota: <code>/tokens/</code></li>
            <li>Tipo: <code>POST</code></li>

            <li>
              Dados para enviar:
              <pre>
{
  "email": "teste@mail.com",
  "password": "abc123"
}
             </pre
              >
            </li>
            <li>
              Exemplo retorno:
              <pre>
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MTAsImVt
            YWlsIjoidGVzdGVAbWFpbC5jb20iLCJpYXQiOjE3Mzk1NTU3OTYsImV4c
            CI6MTc0MDE2MDU5Nn0.1_SwbmpgpvCyIwqt3oG8QjVnGyqo6xv4eOc5IbhMc64"
}</pre
              >
            </li>
          </ul>
        </ul>
      </div>
    </section>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const toggles = document.querySelectorAll(".toggle-info");

        toggles.forEach((toggle) => {
          toggle.addEventListener("click", function (event) {
            event.stopPropagation();

            const currentInfoData = this.nextElementSibling;

            if (
              currentInfoData &&
              currentInfoData.classList.contains("info-data")
            ) {
              const parentUl = this.closest("ul");
              const allSiblings = parentUl.querySelectorAll(
                ":scope > .info-data"
              );

              if (!currentInfoData.classList.contains("active")) {
                currentInfoData
                  .querySelectorAll(".info-data.active")
                  .forEach((nested) => {
                    nested.classList.remove("active");
                  });
              }

              allSiblings.forEach((sibling) => {
                if (sibling !== currentInfoData) {
                  sibling.classList.remove("active");

                  sibling
                    .querySelectorAll(".info-data.active")
                    .forEach((nested) => {
                      nested.classList.remove("active");
                    });
                }
              });

              currentInfoData.classList.toggle("active");
            }
          });
        });
      });
    </script>
  </body>
</html>
